generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

enum GlobalRole {
  USER
  ADMIN
}

enum CompanyRole {
  OWNER
  HR
  RECRUITER
}

enum ApplicationStatus {
  SUBMITTED
  IN_REVIEW
  INTERVIEW
  REJECTED
  HIRED
}

model User {
  id       Int    @id @default(autoincrement())
  name     String
  email    String @unique
  password String

  GlobalRole GlobalRole @default(USER)

  companyId   Int?
  companyRole CompanyRole?
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt

  applications Application[]
}

model Company {
  id      Int     @id @default(autoincrement())
  name    String  @unique
  website String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Job {
  id          Int    @id @default(autoincrement())
  companyName String
  title       String
  description String
  location    String
  salary      Int?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  applications Application[]
}

model Application {
  id Int @id @default(autoincrement())

  userId Int
  user   User @relation(fields: [userId], references: [id], onDelete: Cascade)

  jobId Int
  job   Job @relation(fields: [jobId], references: [id], onDelete: Cascade)

  status      ApplicationStatus @default(SUBMITTED)
  coverLetter String?
  resume      String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
